+  Интро 
+
long "Барий - модульный дистрибутив. Такой как MagOS, slax и многие другие. Одна из особенностей таких сборок это отсутствие процедуры инсталляции ОС в привычном понимании. "
long "Обычно достаточно скопировать содержимое архива на носитель и запустить небольшой скрипт, который установит загрузчик. В случае EFI не нужен и скрипт. Барий тоже можно установить так, Но."
long "У вас не будет шифрованного раздела и прочих полезностей. Либо вам придется создавать разделы вручную переносить туда папки из архива и устанавливать загрузчик, что уже не кажется таким уж простым."
long "Для автоматического выполнения этих действий в корне архива бария лежит скрипт simple-install, особенность его в том, что он может быть запущен практически в любом линукс дистрибутиве."
+
+  Установка на внешний диск
+
long "Скрипт находится в корне архива и именно здесь он должен быть запущен. Переносить заранее содержимое архива на носитель (как например для установки MagOS) не нужно. "
long "Более того, носитель должен быть вставлен в гнездо, но не смонтирован. Если в вашем DE включено автоматическое монтирование - отключите. Это может помешать установке."
+
long "В простейшем случае:"
+
    = green ; echo -n './simple-install /dev/sdb ' ; = default ; long 
+
long "В консоли с правами root, естественно вместо /dev/sdb должен быть файл вашего устройства (подсмотреть можно командой dmesg сразу после того, как вставили носитель в гнездо или командой blkid)"
long "Разбивка будет выбрана автоматически, зависимо от размера носителя. Шифрованный раздел создается только для носителей от 8G, пароль для раздела simple-install спросит, "
long "либо можно задать его с параметром -p password."
+
= green ; echo -n 'Шаблоны: ' ; = default ; long 
+
long "Simple-install содержит несколько шаблонов установки, шаблон выбирается автоматически либо параметром -t"
+
   = green ; echo -n '-t gpt2 ' ; = default ; long ' (два раздела fat 100M для загрузчиков, остальное ext3 под ОС, флаги: overlay)'
   = green ; echo -n '-t gpt3 ' ; = default ; long ' (три раздела, fat 100M для загрузчиков, ext3 5G - система, остальное luks(ext4) - данные, флаги: overlay,luks)'
   = green ; echo -n '-t gpt4 ' ; = default ; long ' (четыре раздела, второй: fat 100M для загрузчиков, третий: ext3 5G - система, четвертый: luks(ext4) 5G - данные, остальное - первый раздел ntfs, флаги: overlay,luks,ntfsmount)'
+
long "Специальные:"
+
   = green ; echo -n '-t hdd ' ; = default ; long ' (4 раздела для установки на встроенный диск. первый: fat 200M для загрузчиков, второй: ext3 20G - система, четвертый: swap размером с ОЗУ, остальное третий раздел ext4 - данные, флаги: overlay,hdd)'
   = green ; echo -n '-t virt ' ; = default ; long ' (четыре раздела для виртуальных машин (vdi), первый: fat 100M для загрузчиков, второй: ext3 6G - система, четвертый: swap 2G, остальное третий раздел ext4 - данные, флаги: overlay,virt,luks)'
+
= green ; echo -n 'Флаги: ' ; = default ; long 
+
long "Это файлы (даже пустые, смысл имеет наличие и отсутствие файла) в корне раздела с каталогом boot. Этими флагами управляется конфигурация загрузчика, "
long "прячутся либо показываются пункты меню или добавляются дополнительные параметры в cmdline ядра. При отсутствии флагов будет всего один загрузочный пункт для "
long ""чистого режима""
+
= green ; echo -n 'Если не подходит ни один шаблон: ' ; = default ; long 
+
long "Можно задать параметры для каждого каталога Бария либо изменить только конкретный параметр для шаблона. Параметры задаются в формате:"
+
long "    КАТАЛОГ=Номер_раздела:размер_раздела_в_мегабайтах:фс"
+
long "Например:"
+
long "    ROSA-DATA=3:6000:ext4"
+
long "Если раздел уже описан для другого каталога, можно писать только номер, например:"
+
long "   boot=1:100:vfat"
long "   EFI=1"
+
long "Для одного из разделов размер может быть задан буквой "x", это означает отдать разделу все оставшееся место."
+
long "Запуск simple-install с шаблоном и заменой размера раздела для одного каталога:"
+
    = green ; echo -n './simlpe-install /dev/sdb -t gpt3 ROSA-SYSTEM=2:10000:ext3 -p qwerty ' ; = default ; long 
+
long "С полным описанием:"
+
    = green ; echo -n './simple-install /dev/sdb -t none EFI=1:100:vfat boot=1 ROSA-DATA=2:10G:ext4 ROSA-SYSTEM=3:x:ext4 SWAP=4:x:swap --flags aufs ' ; = default ; long 
+
long "Если папка с заданным именем существует в текущем каталоге, она будет скопирована в созданный для нее раздел, если нет, то это не приведет к ошибке, как в примере выше со SWAP."
long "Это дает возможность создавать свои, не предусмотренные в Барии разделы."
+
+  Установка в образ 
+
long "Точно также как на носитель simple-install может устанавливать в образ. Поддерживается (на момент написания) два типа:"
+
long "    --qimage 10000 (установка в образ qcow2 размером 10G, образ подходит для qemu, virt-manager)"
long "    --image 10000  (установка в "сырой" образ с расширением img, подходит для побайтового копирования на носитель) "
+
long "Итоговый файл будет иметь имя  OS.qcow2 либо  OS.img соответственно. Подробнее в статье Barium:виртуализация"
+
+  Запуск в Барии 
+
long "Если вы загружены в Барий, нет необходимости качать и распаковывать архив. "
long "Барий может установить сам себя. Для этого запускайте simple-install из любого каталога без начального "./""
long "Все параметры совпадают."
+
long "[[Категория:Barium]]"
